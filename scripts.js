// Language translations
const translations = {
    en: {
        'nav.home': 'Home',
        'nav.products': 'Products',
        'nav.about': 'About',
        'nav.contact': 'Contact',
        'products.title': 'Our Products',
        'products.subtitle': 'Discover our wide range of office furniture solutions',
        'category.all': 'All Products',
        'category.executive': 'Executive Office',
        'category.administrative': 'Administrative Office',
        'category.operational': 'Operational Office',
        'category.meeting': 'Meeting & Conference',
        'category.reception': 'Reception & Waiting',
        'category.storage': 'Storage Solutions',
        'category.break': 'Break Room',
        'category.auxiliary': 'Auxiliary Units',
        'pagination.prev': 'Previous',
        'pagination.next': 'Next',
        'product.inquire': 'Inquire Now',
        // About page translations
        'about.title': 'About Us',
        'about.subtitle': 'Crafting excellence in furniture design since 2015',
        'about.story.title': 'Our Story',
        'about.story.p1': 'Founded in 2015, Setora Design has been at the forefront of modern furniture design. Our philosophy combines Scandinavian minimalism with contemporary aesthetics, creating pieces that are both beautiful and functional.',
        'about.story.p2': 'We believe in sustainable design practices and work closely with local artisans to create furniture that lasts generations. Each piece tells a story of craftsmanship and attention to detail.',
        'about.values.craftsmanship.title': 'Craftsmanship',
        'about.values.craftsmanship.desc': 'Every piece is meticulously crafted with attention to detail and quality materials.',
        'about.values.sustainability.title': 'Sustainability',
        'about.values.sustainability.desc': 'We prioritize eco-friendly materials and sustainable production methods.',
        'about.values.innovation.title': 'Innovation',
        'about.values.innovation.desc': 'Constantly pushing boundaries in furniture design and functionality.',
        'about.values.collaboration.title': 'Collaboration',
        'about.values.collaboration.desc': 'Working closely with clients to bring their vision to life.',
        // Contact page translations
        'contact.title': 'Contact Us',
        'contact.subtitle': 'Let\'s bring your furniture design vision to life',
        'contact.form.title': 'Send us a Message',
        'contact.form.name': 'Name',
        'contact.form.email': 'Email',
        'contact.form.message': 'Message',
        'contact.form.submit': 'Send Message',
        'contact.info.title': 'Get in Touch',
        'contact.info.visit.title': 'Visit Us',
        'contact.info.visit.address1': '123 Design Street',
        'contact.info.visit.address2': 'Creative District',
        'contact.info.visit.address3': 'New York, NY 10001',
        'contact.info.contact.title': 'Contact Info',
        'contact.info.contact.phone': 'Phone: +1 (555) 123-4567',
        'contact.info.contact.email': 'Email: hello@setoradesign.com',
        'contact.info.hours.title': 'Business Hours',
        'contact.info.hours.weekdays': 'Monday - Friday: 9:00 AM - 6:00 PM',
        'contact.info.hours.saturday': 'Saturday: By Appointment',
        'contact.info.hours.sunday': 'Sunday: Closed',
        // Home page translations
        'hero.title': 'Crafting Excellence in Office Furniture',
        'hero.subtitle': 'Transform your workspace with our premium collection of executive, administrative, and operational furniture solutions.',
        'hero.cta.explore': 'Explore Collection',
        'hero.cta.contact': 'Contact Us'
    },
    tr: {
        'nav.home': 'Ana Sayfa',
        'nav.products': 'Ürünler',
        'nav.about': 'Hakkımızda',
        'nav.contact': 'İletişim',
        'products.title': 'Ürünlerimiz',
        'products.subtitle': 'Geniş ofis mobilya çözümlerimizi keşfedin',
        'category.all': 'Tüm Ürünler',
        'category.executive': 'Yönetici Ofisi',
        'category.administrative': 'İdari Ofis',
        'category.operational': 'Operasyonel Ofis',
        'category.meeting': 'Toplantı & Konferans',
        'category.reception': 'Resepsiyon & Bekleme',
        'category.storage': 'Depolama Çözümleri',
        'category.break': 'Dinlenme Odası',
        'category.auxiliary': 'Yardımcı Üniteler',
        'pagination.prev': 'Önceki',
        'pagination.next': 'Sonraki',
        'product.inquire': 'Bilgi Al',
        // About page translations
        'about.title': 'Hakkımızda',
        'about.subtitle': '2015\'ten beri mobilya tasarımında mükemmellik yaratıyoruz',
        'about.story.title': 'Hikayemiz',
        'about.story.p1': '2015 yılında kurulan Setora Design, modern mobilya tasarımının ön saflarında yer almaktadır. Felsefemiz, İskandinav minimalizmini çağdaş estetikle birleştirerek hem güzel hem de işlevsel parçalar yaratmaktadır.',
        'about.story.p2': 'Sürdürülebilir tasarım uygulamalarına inanıyor ve nesiller boyunca dayanacak mobilyalar yaratmak için yerel zanaatkarlarla yakın çalışıyoruz. Her parça, el işçiliği ve detaylara gösterilen özenin bir hikayesini anlatır.',
        'about.values.craftsmanship.title': 'El İşçiliği',
        'about.values.craftsmanship.desc': 'Her parça, detaylara ve kaliteli malzemelere dikkat edilerek titizlikle üretilir.',
        'about.values.sustainability.title': 'Sürdürülebilirlik',
        'about.values.sustainability.desc': 'Çevre dostu malzemelere ve sürdürülebilir üretim yöntemlerine öncelik veriyoruz.',
        'about.values.innovation.title': 'Yenilikçilik',
        'about.values.innovation.desc': 'Mobilya tasarımı ve işlevselliğinde sürekli sınırları zorluyoruz.',
        'about.values.collaboration.title': 'İşbirliği',
        'about.values.collaboration.desc': 'Müşterilerin vizyonunu hayata geçirmek için onlarla yakın çalışıyoruz.',
        // Contact page translations
        'contact.title': 'İletişim',
        'contact.subtitle': 'Mobilya tasarım vizyonunuzu hayata geçirelim',
        'contact.form.title': 'Bize Mesaj Gönderin',
        'contact.form.name': 'İsim',
        'contact.form.email': 'E-posta',
        'contact.form.message': 'Mesaj',
        'contact.form.submit': 'Mesaj Gönder',
        'contact.info.title': 'Bize Ulaşın',
        'contact.info.visit.title': 'Bizi Ziyaret Edin',
        'contact.info.visit.address1': '123 Tasarım Sokağı',
        'contact.info.visit.address2': 'Yaratıcı Bölge',
        'contact.info.visit.address3': 'İstanbul, Türkiye',
        'contact.info.contact.title': 'İletişim Bilgileri',
        'contact.info.contact.phone': 'Telefon: +90 (212) 123-4567',
        'contact.info.contact.email': 'E-posta: info@setoradesign.com',
        'contact.info.hours.title': 'Çalışma Saatleri',
        'contact.info.hours.weekdays': 'Pazartesi - Cuma: 09:00 - 18:00',
        'contact.info.hours.saturday': 'Cumartesi: Randevu ile',
        'contact.info.hours.sunday': 'Pazar: Kapalı',
        // Home page translations
        'hero.title': 'Ofis Mobilyalarında Mükemmellik',
        'hero.subtitle': 'Yönetici, idari ve operasyonel mobilya çözümlerimizle çalışma alanınızı dönüştürün.',
        'hero.cta.explore': 'Koleksiyonu Keşfet',
        'hero.cta.contact': 'Bize Ulaşın'
    }
};

// Language switching functionality
let currentLang = localStorage.getItem('language') || 'en';

function updateLanguage(lang) {
    // Save selected language to localStorage
    localStorage.setItem('language', lang);
    
    // Update all elements with data-lang-key attribute
    document.querySelectorAll('[data-lang-key]').forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update active state of language buttons
    document.querySelectorAll('.language-btn').forEach(btn => {
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
}

// Initialize language selector
document.addEventListener('DOMContentLoaded', function() {
    // Set initial language
    const savedLang = localStorage.getItem('language') || 'en';
    updateLanguage(savedLang);
    
    // Add event listeners to language buttons
    const langButtons = document.querySelectorAll('.language-btn');
    langButtons.forEach(button => {
        button.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            updateLanguage(lang);
            
            // Update active state of buttons
            langButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });
    });
});

// Smooth scroll behavior for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Navbar scroll effect
const navbar = document.querySelector('.navbar');
let lastScroll = 0;

window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    // Add background when scrolling down
    if (currentScroll > 50) {
        navbar.style.backgroundColor = 'rgba(13, 17, 23, 0.98)';
        navbar.style.backdropFilter = 'blur(8px)';
    } else {
        navbar.style.backgroundColor = 'rgba(13, 17, 23, 0.95)';
        navbar.style.backdropFilter = 'blur(0px)';
    }

    // Hide/show navbar on scroll
    if (currentScroll > lastScroll && currentScroll > 100) {
        navbar.style.transform = 'translateY(-100%)';
    } else {
        navbar.style.transform = 'translateY(0)';
    }
    lastScroll = currentScroll;
});

// Intersection Observer for fade-in animations
const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
};

const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
            observer.unobserve(entry.target);
        }
    });
}, observerOptions);

// Add animation to all sections
document.querySelectorAll('section').forEach(section => {
    section.classList.add('animate');
    observer.observe(section);
});

// Product card hover effect
document.addEventListener('DOMContentLoaded', function() {
    initializeProductCardEffects();
});

function initializeProductCardEffects() {
    document.querySelectorAll('.product-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px)';
            this.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.3)';
        });

        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });
}

// Stats counter animation
function animateValue(element, start, end, duration) {
    let startTimestamp = null;
    const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const value = Math.floor(progress * (end - start) + start);
        element.textContent = value + (element.dataset.suffix || '');
        if (progress < 1) {
            window.requestAnimationFrame(step);
        }
    };
    window.requestAnimationFrame(step);
}

// Initialize stats animation when visible
const statsObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const statsItems = document.querySelectorAll('.stat-item h3');
            statsItems.forEach(stat => {
                const value = parseInt(stat.textContent);
                if (!stat.dataset.animated) {
                    animateValue(stat, 0, value, 2000);
                    stat.dataset.animated = true;
                }
            });
            statsObserver.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

const statsSection = document.querySelector('.stats-section');
if (statsSection) {
    statsObserver.observe(statsSection);
}

// Form validation and submission
const contactForm = document.querySelector('.contact-form');
if (contactForm) {
    contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Add loading state
        const submitButton = this.querySelector('button[type="submit"]');
        const originalText = submitButton.textContent;
        submitButton.textContent = 'Sending...';
        submitButton.disabled = true;

        // Simulate form submission (replace with actual form submission)
        setTimeout(() => {
            submitButton.textContent = 'Message Sent!';
            submitButton.style.backgroundColor = '#4CAF50';
            
            // Reset form
            setTimeout(() => {
                this.reset();
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                submitButton.style.backgroundColor = '';
            }, 2000);
        }, 1500);
    });
}

// Mobile menu toggle
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navLinks = document.querySelector('.nav-links');
    
    if (mobileMenuBtn && navLinks) {
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('show');
            mobileMenuBtn.classList.toggle('active');
        });
    }
});

// Add active class to current page link
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const navLinks = document.querySelectorAll('.nav-links a');
    
    navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('active');
        }
    });
});

// Showcase section animations
const showcaseObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
            showcaseObserver.unobserve(entry.target);
        }
    });
}, {
    threshold: 0.2,
    rootMargin: '0px'
});

document.querySelectorAll('.showcase-item').forEach(item => {
    showcaseObserver.observe(item);
});

// Product category filtering and pagination
document.addEventListener('DOMContentLoaded', function() {
    const categoryButtons = document.querySelectorAll('.category-btn');
    const productsGrid = document.querySelector('.products-grid');
    const prevPageButton = document.getElementById('prevPage');
    const nextPageButton = document.getElementById('nextPage');
    const pageNumbers = document.querySelector('.page-numbers');
    
    let currentPage = 1;
    const productsPerPage = 12;
    let currentCategory = 'all';
    let filteredProducts = [];

    // Function to create product card HTML
    function createProductCard(product) {
        return `
            <div class="product-card" data-category="${product.category}">
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="product-info">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <a href="contact.html" class="product-link" data-lang-key="product.inquire">Inquire Now</a>
                </div>
            </div>
        `;
    }

    // Function to update pagination
    function updatePagination(totalProducts) {
        const totalPages = Math.ceil(totalProducts / productsPerPage);
        pageNumbers.innerHTML = '';
        
        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('button');
            pageButton.className = `page-number ${i === currentPage ? 'active' : ''}`;
            pageButton.textContent = i;
            pageButton.addEventListener('click', () => goToPage(i));
            pageNumbers.appendChild(pageButton);
        }

        prevPageButton.disabled = currentPage === 1;
        nextPageButton.disabled = currentPage === totalPages;
    }

    // Function to go to specific page
    function goToPage(page) {
        currentPage = page;
        displayProducts();
        updatePagination(filteredProducts.length);
        
        // Scroll to top of products section
        const productsSection = document.querySelector('.products-section');
        if (productsSection) {
            productsSection.scrollIntoView({ behavior: 'smooth' });
        }
    }

    // Function to display products for current page
    function displayProducts() {
        const start = (currentPage - 1) * productsPerPage;
        const end = start + productsPerPage;
        const productsToShow = filteredProducts.slice(start, end);
        
        productsGrid.innerHTML = productsToShow.map(product => createProductCard(product)).join('');
        
        // Add show class to all product cards
        document.querySelectorAll('.product-card').forEach(card => {
            card.classList.add('show');
        });
        
        // Reinitialize product card hover effects
        initializeProductCardEffects();
    }

    // Initialize products data
    const allProducts = [
        {
            category: 'executive',
            name: 'Executive Desk',
            description: 'Premium executive desk featuring solid wood construction, built-in storage, and modern design elements. Perfect for corner office setups.',
            image: 'image/images/office furnitures/Executive Office Furniture/image_31.jpg'
        },
        {
            category: 'executive',
            name: 'Executive Chair',
            description: 'Ergonomic executive chair with premium leather upholstery, adjustable features, and lumbar support. Designed for comfort during long work hours.',
            image: 'image/images/office furnitures/Executive Office Furniture/image_32.jpg'
        },
        {
            category: 'administrative',
            name: 'Workstation System',
            description: 'Modular workstation system with integrated storage, cable management, and privacy screens. Ideal for open office environments.',
            image: 'image/images/office furnitures/Administrative Office Furniture/image_41.jpg'
        },
        {
            category: 'administrative',
            name: 'Task Chair',
            description: 'Versatile task chair with mesh back, adjustable height, and 360-degree swivel. Perfect for daily office tasks.',
            image: 'image/images/office furnitures/Administrative Office Furniture/image_42.jpg'
        },
        {
            category: 'operational',
            name: 'Standing Desk',
            description: 'Electric standing desk with memory presets, anti-collision system, and spacious work surface. Promotes healthy work habits.',
            image: 'image/images/office furnitures/Operational Office Furniture/image_51.jpg'
        },
        {
            category: 'operational',
            name: 'Filing Cabinet',
            description: 'Secure filing cabinet with soft-close drawers, key lock, and durable construction. Available in various sizes and finishes.',
            image: 'image/images/office furnitures/Operational Office Furniture/image_52.jpg'
        },
        {
            category: 'meeting',
            name: 'Conference Table',
            description: 'Large conference table with premium finish, integrated power outlets, and cable management. Seats 8-12 people comfortably.',
            image: 'image/images/office furnitures/Meeting & Conference Furniture/image_61.jpg'
        },
        {
            category: 'meeting',
            name: 'Meeting Chair',
            description: 'Stackable meeting chair with padded seat, breathable back, and durable frame. Perfect for conference rooms and meeting spaces.',
            image: 'image/images/office furnitures/Meeting & Conference Furniture/image_62.jpg'
        },
        {
            category: 'reception',
            name: 'Reception Desk',
            description: 'Modern reception desk with storage compartments, power outlets, and clean lines. Creates a welcoming first impression.',
            image: 'image/images/office furnitures/Reception & Waiting Furniture/image_71.jpg'
        },
        {
            category: 'reception',
            name: 'Waiting Room Sofa',
            description: 'Comfortable waiting room sofa with durable fabric, solid wood frame, and ergonomic design. Available in various configurations.',
            image: 'image/images/office furnitures/Reception & Waiting Furniture/image_72.jpg'
        },
        {
            category: 'storage',
            name: 'Mobile Pedestal',
            description: 'Mobile storage unit with smooth-gliding drawers, lockable mechanism, and durable casters. Perfect for office organization.',
            image: 'image/images/office furnitures/Storage Solutions/image_81.jpg'
        },
        {
            category: 'storage',
            name: 'Bookcase System',
            description: 'Modular bookcase system with adjustable shelves, integrated lighting, and various finish options. Ideal for office libraries.',
            image: 'image/images/office furnitures/Storage Solutions/image_82.jpg'
        },
        {
            category: 'break',
            name: 'Break Room Table',
            description: 'Durable break room table with scratch-resistant surface, easy-clean finish, and comfortable seating capacity. Perfect for employee break areas.',
            image: 'image/images/office furnitures/Break Room Furniture/image_91.jpg'
        },
        {
            category: 'break',
            name: 'Break Room Chair',
            description: 'Comfortable break room chair with padded seat, back support, and stackable design. Ideal for employee break rooms and cafeterias.',
            image: 'image/images/office furnitures/Break Room Furniture/image_92.jpg'
        },
        {
            category: 'auxiliary',
            name: 'Mobile Whiteboard',
            description: 'Mobile whiteboard with smooth-rolling casters, marker tray, and magnetic surface. Perfect for collaborative workspaces.',
            image: 'image/images/office furnitures/Auxiliary Units/image_101.jpg'
        },
        {
            category: 'auxiliary',
            name: 'Storage Cabinet',
            description: 'Versatile storage cabinet with adjustable shelves, lockable doors, and durable construction. Ideal for office supplies and equipment.',
            image: 'image/images/office furnitures/Auxiliary Units/image_102.jpg'
        }
    ];

    // Initialize with all products
    filteredProducts = [...allProducts];
    displayProducts();
    updatePagination(filteredProducts.length);

    // Add event listeners for pagination buttons
    prevPageButton.addEventListener('click', () => {
        if (currentPage > 1) {
            goToPage(currentPage - 1);
        }
    });

    nextPageButton.addEventListener('click', () => {
        const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
        if (currentPage < totalPages) {
            goToPage(currentPage + 1);
        }
    });

    // Category filtering
    categoryButtons.forEach(button => {
        button.addEventListener('click', function() {
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            currentCategory = this.getAttribute('data-category');
            currentPage = 1;

            if (currentCategory === 'all') {
                filteredProducts = [...allProducts];
            } else {
                filteredProducts = allProducts.filter(product => product.category === currentCategory);
            }

            displayProducts();
            updatePagination(filteredProducts.length);
        });
    });
});

// Function to fetch Unsplash images
async function fetchUnsplashImages(query, count = 1) {
    try {
        const response = await fetch(`https://api.unsplash.com/search/photos?query=${query}&per_page=${count}`, {
            headers: {
                'Authorization': 'Client-ID YOUR_UNSPLASH_ACCESS_KEY'
            }
        });
        const data = await response.json();
        return data.results.map(photo => ({
            url: photo.urls.regular,
            alt: photo.alt_description || query,
            credit: photo.user.name,
            creditUrl: photo.user.links.html
        }));
    } catch (error) {
        console.error('Error fetching Unsplash images:', error);
        return [];
    }
}

// Function to update hero background with Unsplash image
async function updateHeroBackground() {
    const images = await fetchUnsplashImages('modern office furniture', 1);
    if (images.length > 0) {
        const heroSection = document.querySelector('.hero');
        if (heroSection) {
            heroSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${images[0].url}')`;
            
            // Add photo credit
            const credit = document.createElement('div');
            credit.className = 'photo-credit';
            credit.innerHTML = `Photo by <a href="${images[0].creditUrl}" target="_blank" rel="noopener noreferrer">${images[0].credit}</a> on <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>`;
            heroSection.appendChild(credit);
        }
    }
}

// Function to update product images with Unsplash images
async function updateProductImages() {
    const productQueries = {
        'executive-desk': 'executive office desk',
        'conference-table': 'modern conference table',
        'workstation': 'office workstation'
    };

    for (const [productId, query] of Object.entries(productQueries)) {
        const images = await fetchUnsplashImages(query, 1);
        if (images.length > 0) {
            const productCard = document.querySelector(`[data-product-id="${productId}"]`);
            if (productCard) {
                const img = productCard.querySelector('img');
                if (img) {
                    img.src = images[0].url;
                    img.alt = images[0].alt;
                }
            }
        }
    }
}

// Call these functions when the page loads
document.addEventListener('DOMContentLoaded', () => {
    updateHeroBackground();
    updateProductImages();
}); 